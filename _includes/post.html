{% if include.post %}
  {% assign this_post = include.post %}
{% else %}
  {% assign this_post = page %}
{% endif %}

{% if this_post.link %}
  {% assign post_link = this_post.link %}
{% elsif include.post %}
  {% assign post_link = include.post.url %}
{% endif %}

<article class="post">
  <header>
    <h1 class="post-title">
      {% if post_link %}
        <a href="{{ post_link }}">{{ this_post.title }}</a>
      {% else %}
        {{ this_post.title }}
      {% endif %}
    </h1>
    <div class="post-subtitle">
      <span class="post-date">{{ this_post.date | date: '%B %-d, %Y' }}</span>
      <a class="permalink" href="{{ this_post.url }}"></a>
    </div>
  </header>
  <div class="text-content">
    {% if include.post %}
      {{ include.post.content }}
    {% else %}
      {{ content }}
    {% endif %}
  </div>
</article>